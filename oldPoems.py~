import os, re
from datetime import date
 

theCurrentYear = date.today().year

birth   = re.compile('(?<=\nb\.)\d{4}(?=\n)')
death   = re.compile('(?<=\n\d{4}\-)\d{4}(?=\n)')
inpath  = 'clean'
outpath = 'oldPoems'

for file in os.listdir(inpath):
    if file.endswith(".txt"):
        with open(os.path.join(inpath, file), 'r') as f:
            test = '\n'.join(f.readlines()[0:10])

        born  = birth.search(test)
        died  = death.search(test)

        oldEnough  = False

        if not born == None:
            born = int(born.group(0))
            if born < theCurrentYear - 159:
                oldEnough = True            

        elif not died == None:
            died = int(died.group(0))
            if died < theCurrentYear - 49:
                oldEnough = True

        if oldEnough:
            with open(os.path.join(inpath, file), 'r') as f:
                read = f.read()
            with open(os.path.join(outpath, file), 'w') as write:
                write.write(read)
